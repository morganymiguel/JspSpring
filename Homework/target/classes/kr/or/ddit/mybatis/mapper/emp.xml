<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.emp.dao.EmpDAO">

	<resultMap type="EmpVO" id="memberMap" autoMapping="true">
		<id property="empno" column="EMPNO"/>
	</resultMap>
	
	<select id="selectEmp" parameterType="Integer" resultMap="memberMap">

	SELECT C.*, B.EMPNO, B.ENAME
      FROM (SELECT A.EMPNO, A.ENAME, A.MGR, A.DEPTNO, D.DNAME
	  FROM EMP A INNER JOIN DEPT D ON(A.DEPTNO = D.DEPTNO)
		 ) C 
     INNER JOIN EMP B ON(C.MGR = B.EMPNO)
     WHERE C.EMPNO = #{empno,jdbcType=INTEGER}



	</select>
	<insert id="insertEmp" parameterType="EmpVO">
		INSERT INTO EMP (
			        EMPNO
			      , ENAME
			      , JOB
			      , MGR
			      , HIREDATE
			      , SAL
			      , COMM
			      , DEPTNO 
			      ) VALUES (
			        EMPNO_SEQ.NEXTVAL
			      , #{ename,jdbcType=VARCHAR}
			      , #{job,jdbcType=VARCHAR}
			      , #{mgr,jdbcType=INTEGER}
			      , #{hiredate,jdbcType=DATE}
			      , #{sal,jdbcType=INTEGER}
			      , #{comm,jdbcType=INTEGER}
			      , #{deptno,jdbcType=INTEGER}
			);  
		
	</insert>
</mapper>


















